<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Escanear Gabarito</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif; }
body { min-height:100vh; background:linear-gradient(160deg, #998675 0%, #b2a18f 45%, #e8e2dc 100%); display:flex; justify-content:center; align-items:center; }
.screen { width:100%; max-width:380px; height:100vh; background:rgba(255,255,255,0.95); display:flex; flex-direction:column; overflow:hidden; border:3px solid #998675; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
.header { padding:48px 24px 24px; text-align:center; }
.header h1 { font-size:24px; color:#3f362d; }
.subtitle { font-size:14px; color:#6b5f55; }
.content { flex:1; padding:24px; display:flex; flex-direction:column; gap:16px; justify-content:center; align-items:center; }
#qr-reader { width:100%; border:2px dashed #998675; border-radius:16px; padding:10px; box-sizing:border-box; }
</style>
</head>
<body>

<div class="screen">
  <header class="header">
    <h1>Escanear Gabarito</h1>
    <p class="subtitle">Aponte a câmera para o QR code do gabarito</p>
  </header>

  <main class="content">
    <div id="qr-reader"></div>
  </main>
</div>

<script src="https://unpkg.com/html5-qrcode@2.3.9/minified/html5-qrcode.min.js"></script>
<script>
// Função chamada quando QR code é lido
function onScanSuccess(decodedText, decodedResult) {
    console.log(`QR Code lido: ${decodedText}`);
    // Redireciona para a tela de resultados da prova
    window.location.href = `acertosdoaluno.html?gabaritoId=${decodedText}`;
}

// Inicializa scanner
let html5QrcodeScanner = new Html5Qrcode("qr-reader");
html5QrcodeScanner.start(
    { facingMode: "environment" },
    { fps: 10, qrbox: 250 },
    onScanSuccess
).catch(err => console.error(err));
</script>

</body>
</html>
